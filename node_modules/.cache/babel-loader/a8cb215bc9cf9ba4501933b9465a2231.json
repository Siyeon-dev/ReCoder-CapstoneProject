{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport axios from 'axios';\nimport { useState, useEffect } from 'react';\nimport { Link, useHistory } from 'react-router-dom';\nimport { useLocation } from \"react-router\";\n\nconst useForm = (callback, validate) => {\n  _s();\n\n  const location = useLocation();\n  const signUpType = location.state.signOtion;\n  const [values, setValues] = useState({\n    userName: '',\n    userEmail: '',\n    userPasswd: '',\n    userPasswdConfirm: '',\n    userTel: '',\n    signType: ''\n  });\n  const [errors, setErrors] = useState({});\n  const [SignUpSuccess, setSignUpSuccess] = useState(false);\n  const history = useHistory();\n  const [data, setData] = useState();\n\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setValues({ ...values,\n      [name]: value\n    });\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    let datas;\n\n    if (signUpType === \"teacher\") {\n      datas = {\n        t_email: values.userEmail,\n        t_name: values.userName,\n        t_password: values.userPasswd,\n        t_phone: values.userTel,\n        type: signUpType\n      };\n      setData(datas);\n    } else if (signUpType === \"student\") {\n      datas = {\n        s_email: values.userEmail,\n        s_name: values.userName,\n        s_password: values.userPasswd,\n        s_phone: values.userTel,\n        type: signUpType\n      };\n      setData(datas);\n    }\n\n    console.log(datas);\n    setErrors(validate(values));\n    axios.post('signup', datas).then(res => {\n      console.log(res.data.mes);\n\n      if (res.data.mes === \"success\" && res.status === 200) {\n        alert(\"회원가입 되었습니다.\");\n        history.push(\"/\");\n      }\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n\n  useEffect(() => {\n    if (Object.keys(errors).length === 0 && SignUpSuccess) {\n      callback();\n    }\n  }, [errors]);\n  return {\n    handleChange,\n    values,\n    handleSubmit,\n    errors\n  };\n};\n\n_s(useForm, \"QiEmTAWwf3+ZVqR+SZN7xCC8GZM=\", false, function () {\n  return [useLocation, useHistory];\n});\n\nexport default useForm;","map":{"version":3,"sources":["/Library/WebServer/Documents/capstone/capstone-project-re-coder/src/Components/User/useFrom.js"],"names":["axios","useState","useEffect","Link","useHistory","useLocation","useForm","callback","validate","location","signUpType","state","signOtion","values","setValues","userName","userEmail","userPasswd","userPasswdConfirm","userTel","signType","errors","setErrors","SignUpSuccess","setSignUpSuccess","history","data","setData","handleChange","e","name","value","target","handleSubmit","preventDefault","datas","t_email","t_name","t_password","t_phone","type","s_email","s_name","s_password","s_phone","console","log","post","then","res","mes","status","alert","push","catch","err","Object","keys","length"],"mappings":"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","sourcesContent":["import axios from 'axios';\nimport {useState, useEffect} from 'react';\nimport { Link, useHistory } from 'react-router-dom'\nimport { useLocation } from \"react-router\";\n\nconst useForm = (callback, validate) => {\n\n    const location = useLocation();\n    const signUpType = location.state.signOtion;\n\n    const [values, setValues] = useState({\n        userName : '',\n        userEmail : '',\n        userPasswd : '',\n        userPasswdConfirm : '',\n        userTel : '',\n        signType : ''\n    });\n    const [errors, setErrors] = useState({});\n    const [SignUpSuccess, setSignUpSuccess] = useState(false);\n    const history = useHistory();\n    const [data, setData] = useState();\n\n    const handleChange = e => {\n        const {name, value} = e.target;\n        setValues({\n            ...values,\n            [name] : value\n        })\n    }\n\n    const handleSubmit = e => {\n        e.preventDefault();\n\n        \n        let datas;\n\n        if(signUpType === \"teacher\") {\n            datas = {\n                t_email : values.userEmail,\n                t_name : values.userName,\n                t_password : values.userPasswd,\n                t_phone : values.userTel,\n                type : signUpType\n            };\n            setData(datas);\n        } else if (signUpType === \"student\"){\n            datas = {\n                s_email : values.userEmail,\n                s_name : values.userName,\n                s_password : values.userPasswd,\n                s_phone : values.userTel,\n                type : signUpType\n            };\n            setData(datas);\n        }\n\n        \n        console.log(datas);\n        setErrors(validate(values));\n\n        axios.post('signup', datas).then(res => {\n            console.log(res.data.mes);\n                if(res.data.mes === \"success\" && res.status === 200){\n                    alert(\"회원가입 되었습니다.\");\n                    history.push(\"/\")\n                }\n        })\n        .catch(err => {\n            console.log(err)\n        })\n\n    }\n\n    useEffect (() => {\n            if (Object.keys(errors).length === 0 && SignUpSuccess) {\n                callback();\n            }\n        },\n        [errors]\n    );\n\n    return {handleChange, values, handleSubmit, errors};\n};\n\nexport default useForm;"]},"metadata":{},"sourceType":"module"}