{"ast":null,"code":"\"use strict\";\n\nconst idlUtils = require(\"../generated/utils\");\n\nconst EventInit = require(\"../generated/EventInit\");\n\nclass EventImpl {\n  constructor(globalObject, args, privateData) {\n    const [type, eventInitDict = this.constructor.defaultInit] = args;\n    this.type = type;\n    this.bubbles = false;\n    this.cancelable = false;\n\n    for (const key in eventInitDict) {\n      if (key in this.constructor.defaultInit) {\n        this[key] = eventInitDict[key];\n      }\n    }\n\n    for (const key in this.constructor.defaultInit) {\n      if (!(key in this)) {\n        this[key] = this.constructor.defaultInit[key];\n      }\n    }\n\n    this.target = null;\n    this.currentTarget = null;\n    this.eventPhase = 0;\n    this._globalObject = globalObject;\n    this._initializedFlag = true;\n    this._stopPropagationFlag = false;\n    this._stopImmediatePropagationFlag = false;\n    this._canceledFlag = false;\n    this._inPassiveListenerFlag = false;\n    this._dispatchFlag = false;\n    this._path = [];\n    this.isTrusted = privateData.isTrusted || false;\n    this.timeStamp = Date.now();\n  } // https://dom.spec.whatwg.org/#set-the-canceled-flag\n\n\n  _setTheCanceledFlag() {\n    if (this.cancelable && !this._inPassiveListenerFlag) {\n      this._canceledFlag = true;\n    }\n  }\n\n  get srcElement() {\n    return this.target;\n  }\n\n  get returnValue() {\n    return !this._canceledFlag;\n  }\n\n  set returnValue(v) {\n    if (v === false) {\n      this._setTheCanceledFlag();\n    }\n  }\n\n  get defaultPrevented() {\n    return this._canceledFlag;\n  }\n\n  stopPropagation() {\n    this._stopPropagationFlag = true;\n  }\n\n  get cancelBubble() {\n    return this._stopPropagationFlag;\n  }\n\n  set cancelBubble(v) {\n    if (v) {\n      this._stopPropagationFlag = true;\n    }\n  }\n\n  stopImmediatePropagation() {\n    this._stopPropagationFlag = true;\n    this._stopImmediatePropagationFlag = true;\n  }\n\n  preventDefault() {\n    this._setTheCanceledFlag();\n  } // https://dom.spec.whatwg.org/#dom-event-composedpath\n  // Current implementation is based of https://whatpr.org/dom/699.html#dom-event-composedpath\n  // due to a bug in composed path implementation https://github.com/whatwg/dom/issues/684\n\n\n  composedPath() {\n    const composedPath = [];\n    const {\n      currentTarget,\n      _path: path\n    } = this;\n\n    if (path.length === 0) {\n      return composedPath;\n    }\n\n    composedPath.push(currentTarget);\n    let currentTargetIndex = 0;\n    let currentTargetHiddenSubtreeLevel = 0;\n\n    for (let index = path.length - 1; index >= 0; index--) {\n      const {\n        item,\n        rootOfClosedTree,\n        slotInClosedTree\n      } = path[index];\n\n      if (rootOfClosedTree) {\n        currentTargetHiddenSubtreeLevel++;\n      }\n\n      if (item === idlUtils.implForWrapper(currentTarget)) {\n        currentTargetIndex = index;\n        break;\n      }\n\n      if (slotInClosedTree) {\n        currentTargetHiddenSubtreeLevel--;\n      }\n    }\n\n    let currentHiddenLevel = currentTargetHiddenSubtreeLevel;\n    let maxHiddenLevel = currentTargetHiddenSubtreeLevel;\n\n    for (let i = currentTargetIndex - 1; i >= 0; i--) {\n      const {\n        item,\n        rootOfClosedTree,\n        slotInClosedTree\n      } = path[i];\n\n      if (rootOfClosedTree) {\n        currentHiddenLevel++;\n      }\n\n      if (currentHiddenLevel <= maxHiddenLevel) {\n        composedPath.unshift(idlUtils.wrapperForImpl(item));\n      }\n\n      if (slotInClosedTree) {\n        currentHiddenLevel--;\n\n        if (currentHiddenLevel < maxHiddenLevel) {\n          maxHiddenLevel = currentHiddenLevel;\n        }\n      }\n    }\n\n    currentHiddenLevel = currentTargetHiddenSubtreeLevel;\n    maxHiddenLevel = currentTargetHiddenSubtreeLevel;\n\n    for (let index = currentTargetIndex + 1; index < path.length; index++) {\n      const {\n        item,\n        rootOfClosedTree,\n        slotInClosedTree\n      } = path[index];\n\n      if (slotInClosedTree) {\n        currentHiddenLevel++;\n      }\n\n      if (currentHiddenLevel <= maxHiddenLevel) {\n        composedPath.push(idlUtils.wrapperForImpl(item));\n      }\n\n      if (rootOfClosedTree) {\n        currentHiddenLevel--;\n\n        if (currentHiddenLevel < maxHiddenLevel) {\n          maxHiddenLevel = currentHiddenLevel;\n        }\n      }\n    }\n\n    return composedPath;\n  }\n\n  _initialize(type, bubbles, cancelable) {\n    this.type = type;\n    this._initializedFlag = true;\n    this._stopPropagationFlag = false;\n    this._stopImmediatePropagationFlag = false;\n    this._canceledFlag = false;\n    this.isTrusted = false;\n    this.target = null;\n    this.bubbles = bubbles;\n    this.cancelable = cancelable;\n  }\n\n  initEvent(type, bubbles, cancelable) {\n    if (this._dispatchFlag) {\n      return;\n    }\n\n    this._initialize(type, bubbles, cancelable);\n  }\n\n}\n\nEventImpl.defaultInit = EventInit.convert(undefined);\nmodule.exports = {\n  implementation: EventImpl\n};","map":{"version":3,"sources":["/Library/WebServer/Documents/capstone/capstone-project-re-coder/node_modules/jsdom/lib/jsdom/living/events/Event-impl.js"],"names":["idlUtils","require","EventInit","EventImpl","constructor","globalObject","args","privateData","type","eventInitDict","defaultInit","bubbles","cancelable","key","target","currentTarget","eventPhase","_globalObject","_initializedFlag","_stopPropagationFlag","_stopImmediatePropagationFlag","_canceledFlag","_inPassiveListenerFlag","_dispatchFlag","_path","isTrusted","timeStamp","Date","now","_setTheCanceledFlag","srcElement","returnValue","v","defaultPrevented","stopPropagation","cancelBubble","stopImmediatePropagation","preventDefault","composedPath","path","length","push","currentTargetIndex","currentTargetHiddenSubtreeLevel","index","item","rootOfClosedTree","slotInClosedTree","implForWrapper","currentHiddenLevel","maxHiddenLevel","i","unshift","wrapperForImpl","_initialize","initEvent","convert","undefined","module","exports","implementation"],"mappings":"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","sourcesContent":["\"use strict\";\n\nconst idlUtils = require(\"../generated/utils\");\nconst EventInit = require(\"../generated/EventInit\");\n\nclass EventImpl {\n  constructor(globalObject, args, privateData) {\n    const [type, eventInitDict = this.constructor.defaultInit] = args;\n\n    this.type = type;\n\n    this.bubbles = false;\n    this.cancelable = false;\n    for (const key in eventInitDict) {\n      if (key in this.constructor.defaultInit) {\n        this[key] = eventInitDict[key];\n      }\n    }\n    for (const key in this.constructor.defaultInit) {\n      if (!(key in this)) {\n        this[key] = this.constructor.defaultInit[key];\n      }\n    }\n\n    this.target = null;\n    this.currentTarget = null;\n    this.eventPhase = 0;\n\n    this._globalObject = globalObject;\n    this._initializedFlag = true;\n    this._stopPropagationFlag = false;\n    this._stopImmediatePropagationFlag = false;\n    this._canceledFlag = false;\n    this._inPassiveListenerFlag = false;\n    this._dispatchFlag = false;\n    this._path = [];\n\n    this.isTrusted = privateData.isTrusted || false;\n    this.timeStamp = Date.now();\n  }\n\n  // https://dom.spec.whatwg.org/#set-the-canceled-flag\n  _setTheCanceledFlag() {\n    if (this.cancelable && !this._inPassiveListenerFlag) {\n      this._canceledFlag = true;\n    }\n  }\n\n  get srcElement() {\n    return this.target;\n  }\n\n  get returnValue() {\n    return !this._canceledFlag;\n  }\n\n  set returnValue(v) {\n    if (v === false) {\n      this._setTheCanceledFlag();\n    }\n  }\n\n  get defaultPrevented() {\n    return this._canceledFlag;\n  }\n\n  stopPropagation() {\n    this._stopPropagationFlag = true;\n  }\n\n  get cancelBubble() {\n    return this._stopPropagationFlag;\n  }\n\n  set cancelBubble(v) {\n    if (v) {\n      this._stopPropagationFlag = true;\n    }\n  }\n\n  stopImmediatePropagation() {\n    this._stopPropagationFlag = true;\n    this._stopImmediatePropagationFlag = true;\n  }\n\n  preventDefault() {\n    this._setTheCanceledFlag();\n  }\n\n  // https://dom.spec.whatwg.org/#dom-event-composedpath\n  // Current implementation is based of https://whatpr.org/dom/699.html#dom-event-composedpath\n  // due to a bug in composed path implementation https://github.com/whatwg/dom/issues/684\n  composedPath() {\n    const composedPath = [];\n\n    const { currentTarget, _path: path } = this;\n\n    if (path.length === 0) {\n      return composedPath;\n    }\n\n    composedPath.push(currentTarget);\n\n    let currentTargetIndex = 0;\n    let currentTargetHiddenSubtreeLevel = 0;\n\n    for (let index = path.length - 1; index >= 0; index--) {\n      const { item, rootOfClosedTree, slotInClosedTree } = path[index];\n\n      if (rootOfClosedTree) {\n        currentTargetHiddenSubtreeLevel++;\n      }\n\n      if (item === idlUtils.implForWrapper(currentTarget)) {\n        currentTargetIndex = index;\n        break;\n      }\n\n      if (slotInClosedTree) {\n        currentTargetHiddenSubtreeLevel--;\n      }\n    }\n\n    let currentHiddenLevel = currentTargetHiddenSubtreeLevel;\n    let maxHiddenLevel = currentTargetHiddenSubtreeLevel;\n\n    for (let i = currentTargetIndex - 1; i >= 0; i--) {\n      const { item, rootOfClosedTree, slotInClosedTree } = path[i];\n\n      if (rootOfClosedTree) {\n        currentHiddenLevel++;\n      }\n\n      if (currentHiddenLevel <= maxHiddenLevel) {\n        composedPath.unshift(idlUtils.wrapperForImpl(item));\n      }\n\n      if (slotInClosedTree) {\n        currentHiddenLevel--;\n        if (currentHiddenLevel < maxHiddenLevel) {\n          maxHiddenLevel = currentHiddenLevel;\n        }\n      }\n    }\n\n    currentHiddenLevel = currentTargetHiddenSubtreeLevel;\n    maxHiddenLevel = currentTargetHiddenSubtreeLevel;\n\n    for (let index = currentTargetIndex + 1; index < path.length; index++) {\n      const { item, rootOfClosedTree, slotInClosedTree } = path[index];\n\n      if (slotInClosedTree) {\n        currentHiddenLevel++;\n      }\n\n      if (currentHiddenLevel <= maxHiddenLevel) {\n        composedPath.push(idlUtils.wrapperForImpl(item));\n      }\n\n      if (rootOfClosedTree) {\n        currentHiddenLevel--;\n        if (currentHiddenLevel < maxHiddenLevel) {\n          maxHiddenLevel = currentHiddenLevel;\n        }\n      }\n    }\n\n    return composedPath;\n  }\n\n  _initialize(type, bubbles, cancelable) {\n    this.type = type;\n    this._initializedFlag = true;\n\n    this._stopPropagationFlag = false;\n    this._stopImmediatePropagationFlag = false;\n    this._canceledFlag = false;\n\n    this.isTrusted = false;\n    this.target = null;\n    this.bubbles = bubbles;\n    this.cancelable = cancelable;\n  }\n\n  initEvent(type, bubbles, cancelable) {\n    if (this._dispatchFlag) {\n      return;\n    }\n\n    this._initialize(type, bubbles, cancelable);\n  }\n}\nEventImpl.defaultInit = EventInit.convert(undefined);\n\nmodule.exports = {\n  implementation: EventImpl\n};\n"]},"metadata":{},"sourceType":"script"}