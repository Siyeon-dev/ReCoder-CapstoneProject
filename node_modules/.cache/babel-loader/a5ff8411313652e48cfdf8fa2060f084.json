{"ast":null,"code":"var _jsxFileName = \"/Library/WebServer/Documents/capstone/capstone-project-re-coder/src/Components/User/FormLogin.js\",\n    _s = $RefreshSig$();\n\nimport axios from \"axios\";\nimport React, { useEffect, useState } from \"react\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport { useCookies } from \"react-cookie\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst api = axios.create({\n  headers: {\n    \"Access-Control-Allow-Origin\": \"*\"\n  }\n});\n\nconst FormLogin = () => {\n  _s();\n\n  const [userId, setUserId] = useState();\n  const [userPasswd, setUserPasswd] = useState();\n  const [status, setStatus] = useState(null);\n  const history = useHistory();\n  const [data, setData] = useState();\n  const [cookies, setCookie, removeCookie] = useCookies();\n  const [loginType, setloginType] = useState(\"teacher\"); // 처음 시작 시 cookies 지우기\n\n  useEffect(() => {\n    removeCookie(\"t_email\");\n    removeCookie(\"t_name\");\n    removeCookie(\"s_email\");\n    removeCookie(\"s_name\");\n    removeCookie(\"isLogin\");\n  }, []);\n\n  const handleOptionChange = e => {\n    e.target.value ? setloginType(e.target.value) : setloginType(\"\");\n    console.log(e.target.value);\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    let data;\n\n    if (loginType === \"teacher\") {\n      data = {\n        t_email: userId,\n        t_password: userPasswd\n      };\n      setData(data);\n    } else if (loginType === \"student\") {\n      data = {\n        s_email: userId,\n        s_password: userPasswd\n      };\n      setData(data);\n    } else {\n      alert(\"선생님과 학생 중 선택해주세요.\");\n    }\n\n    console.log(data);\n    axios.post(\"login\", data).then(res => {\n      localStorage.setItem(\"token\", res.data.token);\n      console.log(res.data.login);\n      const {\n        accessToken\n      } = res.data;\n      axios.defaults.headers.common[\"Authorization\"] = `Bearer ${accessToken}`;\n      console.log(accessToken);\n\n      if (res.data.login === \"success\" && res.data.token) {\n        console.log(res.data);\n        alert(\"로그인되었습니다.\");\n        setStatus(res.status);\n\n        if (loginType === \"teacher\") {\n          setCookie(\"t_email\", data.t_email);\n          setCookie(\"t_name\", res.data.t_name);\n          history.push(\"/teacher\");\n        } else if (loginType === \"student\") {\n          setCookie(\"s_email\", data.s_email);\n          setCookie(\"s_name\", res.data.s_name);\n          history.push(\"/student\");\n        }\n\n        setCookie(\"isLogin\", true);\n      } else {\n        alert(\"로그인에 실패하였습니다.\\n아이디와 비밀번호를 확인해 주세요.\");\n        history.push(\"/\");\n      }\n    }).catch(err => {\n      err.response && err.response.data && console.log(err.response.data);\n      localStorage.removeItem(\"token\");\n      setStatus(err.status);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    id: \"wrapper\",\n    className: \"bg\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"top_txt\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"tit\",\n          children: \"\\uC628\\uB77C\\uC778 \\uC2DC\\uD5D8 \\uAC10\\uB3C5 \\uC11C\\uBE44\\uC2A4 \\uB9AC\\uCF54\\uB354\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"\\uBD80\\uC815\\uD589\\uC704 \\uAC71\\uC815 \\uC5C6\\uC774\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 13\n          }, this), \"\\uC628\\uB77C\\uC778 \\uC2DC\\uD5D8\\uC744 \\uC6B4\\uC601, \\uAC10\\uB3C5\\uD558\\uC138\\uC694.\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"login_input_wrap\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"wlogo\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: \"./img/login_join_logo.gif\",\n            alt: \"\\uB85C\\uADF8\\uC778, \\uD68C\\uC6D0\\uAC00\\uC785 \\uD398\\uC774\\uC9C0 \\uB85C\\uACE0\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"txt\",\n          children: \"\\uD648\\uD398\\uC774\\uC9C0\\uC5D0 \\uC624\\uC2E0 \\uAC83\\uC744 \\uD658\\uC601\\uD569\\uB2C8\\uB2E4.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          action: \"\",\n          onSubmit: handleSubmit,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"login_radio_area\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"toggle-button toggle-button--maa\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                id: \"login_teacher\",\n                name: \"login_type\",\n                type: \"radio\",\n                value: \"teacher\",\n                defaultChecked: true,\n                onChange: handleOptionChange\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 122,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                for: \"login_teacher\",\n                \"data-text\": \"\\uC120\\uC0DD\\uB2D8\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 130,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"toggle-button__icon\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 131,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 121,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"toggle-button toggle-button--maa\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                id: \"login_student\",\n                name: \"login_type\",\n                type: \"radio\",\n                value: \"student\",\n                onChange: handleOptionChange\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 134,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                for: \"login_student\",\n                \"data-text\": \"\\uD559\\uC0DD\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 141,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"toggle-button__icon\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 142,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 133,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"userId\",\n            onChange: e => {\n              setUserId(e.target.value);\n            },\n            placeholder: \"\\uC544\\uC774\\uB514\\uB97C \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"password\",\n            name: \"userPasswd\",\n            onChange: e => {\n              setUserPasswd(e.target.value);\n            },\n            placeholder: \"\\uBE44\\uBC00\\uBC88\\uD638\\uB97C \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"submit\",\n            value: \"\\uB85C\\uADF8\\uC778\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 162,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"login_link mt30\",\n          children: [\"\\uC544\\uC9C1 \\uACC4\\uC815\\uC774 \\uC5C6\\uC73C\\uC2E0\\uAC00\\uC694? \", /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/signup\",\n            children: \"\\uD68C\\uC6D0\\uAC00\\uC785\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 166,\n            columnNumber: 27\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"login_link\",\n          children: [\"\\uC544\\uC774\\uB514/\\uBE44\\uBC00\\uBC88\\uD638\\uAC00 \\uAE30\\uC5B5\\uB098\\uC9C0 \\uC54A\\uC73C\\uC2E0\\uAC00\\uC694?\", \" \", /*#__PURE__*/_jsxDEV(Link, {\n            to: \"\",\n            children: \"\\uC544\\uC774\\uB514/\\uBE44\\uBC00\\uBC88\\uD638 \\uCC3E\\uAE30\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 170,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 100,\n    columnNumber: 5\n  }, this);\n};\n\n_s(FormLogin, \"ZwLvzOlQ0UmbJi5B8iWq4mREjkU=\", false, function () {\n  return [useHistory, useCookies];\n});\n\n_c = FormLogin;\nexport default FormLogin;\n\nvar _c;\n\n$RefreshReg$(_c, \"FormLogin\");","map":{"version":3,"sources":["/Library/WebServer/Documents/capstone/capstone-project-re-coder/src/Components/User/FormLogin.js"],"names":["axios","React","useEffect","useState","Link","useHistory","useCookies","api","create","headers","FormLogin","userId","setUserId","userPasswd","setUserPasswd","status","setStatus","history","data","setData","cookies","setCookie","removeCookie","loginType","setloginType","handleOptionChange","e","target","value","console","log","handleSubmit","preventDefault","t_email","t_password","s_email","s_password","alert","post","then","res","localStorage","setItem","token","login","accessToken","defaults","common","t_name","push","s_name","catch","err","response","removeItem"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport React, { useEffect, useState } from \"react\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport { useCookies } from \"react-cookie\";\n\nconst api = axios.create({\n  headers: {\n    \"Access-Control-Allow-Origin\": \"*\",\n  },\n});\n\nconst FormLogin = () => {\n  const [userId, setUserId] = useState();\n  const [userPasswd, setUserPasswd] = useState();\n  const [status, setStatus] = useState(null);\n  const history = useHistory();\n  const [data, setData] = useState();\n  const [cookies, setCookie, removeCookie] = useCookies();\n  const [loginType, setloginType] = useState(\"teacher\");\n\n    // 처음 시작 시 cookies 지우기\n    useEffect(() => {\n      removeCookie(\"t_email\");\n      removeCookie(\"t_name\");\n      removeCookie(\"s_email\");\n      removeCookie(\"s_name\");\n      removeCookie(\"isLogin\");\n    }, [])\n\n  const handleOptionChange = (e) => {\n    e.target.value ? setloginType(e.target.value) : setloginType(\"\");\n    console.log(e.target.value);\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n\n    let data;\n\n    if (loginType === \"teacher\") {\n      data = {\n        t_email: userId,\n        t_password: userPasswd,\n      };\n      setData(data);\n    } else if (loginType === \"student\") {\n      data = {\n        s_email: userId,\n        s_password: userPasswd,\n      };\n      setData(data);\n    } else {\n      alert(\"선생님과 학생 중 선택해주세요.\");\n    }\n\n    console.log(data);\n\n    axios\n      .post(\"login\", data)\n      .then((res) => {\n        localStorage.setItem(\"token\", res.data.token);\n        console.log(res.data.login);\n\n        const { accessToken } = res.data;\n        axios.defaults.headers.common[\n          \"Authorization\"\n        ] = `Bearer ${accessToken}`;\n        console.log(accessToken);\n\n        if (res.data.login === \"success\" && res.data.token) {\n          console.log(res.data);\n          alert(\"로그인되었습니다.\");\n          setStatus(res.status);\n\n          if (loginType === \"teacher\") {\n            setCookie(\"t_email\", data.t_email);\n            setCookie(\"t_name\", res.data.t_name);\n            history.push(\"/teacher\");\n          } else if (loginType === \"student\") {\n            setCookie(\"s_email\", data.s_email);\n            setCookie(\"s_name\", res.data.s_name);\n            history.push(\"/student\");\n          }\n\n          setCookie(\"isLogin\", true);\n        } else {\n          alert(\"로그인에 실패하였습니다.\\n아이디와 비밀번호를 확인해 주세요.\");\n          history.push(\"/\");\n        }\n      })\n      .catch((err) => {\n        err.response && err.response.data && console.log(err.response.data);\n        localStorage.removeItem(\"token\");\n        setStatus(err.status);\n      });\n  };\n\n\n  return (\n    <div id=\"wrapper\" className=\"bg\">\n      <div id=\"container\">\n        <div className=\"top_txt\">\n          <p className=\"tit\">온라인 시험 감독 서비스 리코더</p>\n          <p>\n            부정행위 걱정 없이\n            <br />\n            온라인 시험을 운영, 감독하세요.\n          </p>\n        </div>\n        <div className=\"login_input_wrap\">\n          <div className=\"wlogo\">\n            <img\n              src=\"./img/login_join_logo.gif\"\n              alt=\"로그인, 회원가입 페이지 로고\"\n            />\n          </div>\n          <p className=\"txt\">홈페이지에 오신 것을 환영합니다.</p>\n          <form action=\"\" onSubmit={handleSubmit}>\n            {/**/}\n            <div className=\"login_radio_area\">\n              <div className=\"toggle-button toggle-button--maa\">\n                <input\n                  id=\"login_teacher\"\n                  name=\"login_type\"\n                  type=\"radio\"\n                  value=\"teacher\"\n                  defaultChecked={true}\n                  onChange={handleOptionChange}\n                />\n                <label for=\"login_teacher\" data-text=\"선생님\"></label>\n                <div className=\"toggle-button__icon\"></div>\n              </div>\n              <div className=\"toggle-button toggle-button--maa\">\n                <input\n                  id=\"login_student\"\n                  name=\"login_type\"\n                  type=\"radio\"\n                  value=\"student\"\n                  onChange={handleOptionChange}\n                />\n                <label for=\"login_student\" data-text=\"학생\"></label>\n                <div className=\"toggle-button__icon\"></div>\n              </div>\n            </div>\n\n            <input\n              type=\"text\"\n              name=\"userId\"\n              onChange={(e) => {\n                setUserId(e.target.value);\n              }}\n              placeholder=\"아이디를 입력해주세요.\"\n            />\n            <input\n              type=\"password\"\n              name=\"userPasswd\"\n              onChange={(e) => {\n                setUserPasswd(e.target.value);\n              }}\n              placeholder=\"비밀번호를 입력해주세요.\"\n            />\n            <input type=\"submit\" value=\"로그인\" />\n          </form>\n\n          <p className=\"login_link mt30\">\n            아직 계정이 없으신가요? <Link to=\"/signup\">회원가입</Link>\n          </p>\n          <p className=\"login_link\">\n            아이디/비밀번호가 기억나지 않으신가요?{\" \"}\n            <Link to=\"\">아이디/비밀번호 찾기</Link>\n          </p>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default FormLogin;\n"]},"metadata":{},"sourceType":"module"}