{"ast":null,"code":"import _slicedToArray from\"/Users/kanbaer/capstone-project-re-coder/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{Link,HashRouter,useHistory}from\"react-router-dom\";import{useCookies}from'react-cookie';import axios from\"axios\";import{TextField}from\"@material-ui/core\";import Header from'./Header';import\"../css.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Main=function Main(){var _useState=useState(),_useState2=_slicedToArray(_useState,2),userId=_useState2[0],setUserId=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),userPw=_useState4[0],setUserPw=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),userNumber=_useState6[0],setUserNumber=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),data=_useState8[0],setData=_useState8[1];var _useCookies=useCookies(),_useCookies2=_slicedToArray(_useCookies,3),cookies=_useCookies2[0],setCookie=_useCookies2[1],removeCookie=_useCookies2[2];var history=useHistory();useEffect(function(){removeCookie(\"s_email\");removeCookie(\"s_name\");removeCookie(\"s_number\");removeCookie(\"isLogin\");},[]);var getUserData=function getUserData(e){var data={s_email:userId,s_password:userPw};setData(data);console.log(data);axios.post(\"http://3.89.30.234:3000/login\",data).then(function(res){localStorage.setItem(\"token\",res.data.token);var accessToken=res.data.accessToken;axios.defaults.headers.common['Authorization']=\"Bearer \".concat(accessToken);console.log(res.data);if(res.data.login==\"success\"){alert(\"로그인 되었습니다\");setCookie(\"s_email\",data.s_email);setCookie(\"s_name\",res.data.s_name);setCookie(\"s_number\",res.data.s_number);setCookie(\"isLogin\",true);history.push(\"/Guide\");}else{alert(\"로그인에 실패했습니다\\n아이디 또는 비밀번호를 확인하여 주세요\");history.push(\"/\");}}).catch(function(err){console.log(err.res);localStorage.removeItem(\"token\");});};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"MainBox\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"BoxTextTitle\",children:\"\\uC628\\uB77C\\uC778 \\uCF54\\uB529 \\uC2DC\\uD5D8 \\uD50C\\uB7AB\\uD3FC Re:Coder \\uC785\\uB2C8\\uB2E4\"}),/*#__PURE__*/_jsx(\"span\",{className:\"BoxTextConnect\",children:\"\\uC628\\uB77C\\uC778 \\uC2DC\\uD5D8 \\uAC10\\uB3C5\\uC744 \\uC704\\uD574 \\uCE74\\uBA54\\uB77C \\uC0AC\\uC6A9 \\uAD8C\\uD55C \\uD5C8\\uC6A9\\uC774 \\uD544\\uC694\\uD569\\uB2C8\\uB2E4.\"}),/*#__PURE__*/_jsx(\"div\",{className:\"MainSubBox\",children:/*#__PURE__*/_jsx(\"span\",{className:\"SubBoxText\",children:\"\\uC6D0\\uD65C\\uD55C \\uC2DC\\uD5D8 \\uC751\\uC2DC\\uB97C \\uC704\\uD558\\uC5EC ID\\uC640 PW\\uB97C \\uC785\\uB825 \\uD6C4 \\uB85C\\uADF8\\uC778 \\uD574 \\uC8FC\\uC138\\uC694.\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"LoginBox\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"BoxTextCode\",children:[/*#__PURE__*/_jsx(\"span\",{style:{color:\"red\"},children:\"\\u273B\"}),\" \\uB85C\\uADF8\\uC778\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"InputBox\",children:[/*#__PURE__*/_jsx(TextField,{id:\"userId\",variant:\"outlined\",size:\"small\",label:\"ID\",style:{width:\"100%\",margin:\"10px 0px\"},onChange:function onChange(e){return setUserId(e.target.value);}}),/*#__PURE__*/_jsx(TextField,{id:\"userPw\",variant:\"outlined\",size:\"small\",label:\"PW\",style:{width:\"100%\"},type:\"password\",onChange:function onChange(e){return setUserPw(e.target.value);}})]})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"MainButton\",onClick:function onClick(){return getUserData();},children:\"\\uB85C\\uADF8\\uC778\"})})]})]});};export default Main;","map":{"version":3,"sources":["/Users/kanbaer/capstone-project-re-coder/src/components/Main.js"],"names":["React","useState","useEffect","Link","HashRouter","useHistory","useCookies","axios","TextField","Header","Main","userId","setUserId","userPw","setUserPw","userNumber","setUserNumber","data","setData","cookies","setCookie","removeCookie","history","getUserData","e","s_email","s_password","console","log","post","then","res","localStorage","setItem","token","accessToken","defaults","headers","common","login","alert","s_name","s_number","push","catch","err","removeItem","color","width","margin","target","value"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Link, HashRouter, useHistory } from \"react-router-dom\";\nimport { useCookies } from 'react-cookie';\nimport axios from \"axios\";\n\nimport { TextField } from \"@material-ui/core\";\nimport Header from './Header';\n\nimport \"../css.css\";\n\n\nconst Main = () => {\n    const [userId, setUserId]                   = useState();\n    const [userPw, setUserPw]                   = useState();\n    const [userNumber, setUserNumber]           = useState();\n    const [data, setData]                       = useState();\n    const [cookies, setCookie, removeCookie]    = useCookies();\n    const history                               = useHistory();\n\n    useEffect(() => {\n        removeCookie(\"s_email\");\n        removeCookie(\"s_name\");\n        removeCookie(\"s_number\");\n        removeCookie(\"isLogin\");\n    }, [])\n\n    const getUserData = (e) => {\n        \n        let data = {\n            s_email: userId,\n            s_password: userPw\n        };\n\n        setData(data);\n\n        console.log(data);\n\n        axios\n        .post(\"http://3.89.30.234:3000/login\", data)\n        .then((res)=> {\n            localStorage.setItem(\"token\", res.data.token);\n\n            const { accessToken } = res.data;\n            axios.defaults.headers.common['Authorization'] = `Bearer ${accessToken}`;\n            console.log(res.data)\n            \n            if(res.data.login == \"success\") {\n                alert(\"로그인 되었습니다\");\n                setCookie(\"s_email\", data.s_email);\n                setCookie(\"s_name\", res.data.s_name);\n                setCookie(\"s_number\", res.data.s_number);\n                setCookie(\"isLogin\", true);\n\n                history.push(\"/Guide\");\n            }\n            else {\n                alert(\"로그인에 실패했습니다\\n아이디 또는 비밀번호를 확인하여 주세요\");\n\n                history.push(\"/\");\n            }\n        })\n        .catch((err) => {\n            console.log(err.res);\n            localStorage.removeItem(\"token\");\n        })\n    }\n    \n    return (\n        <div>\n            <Header />\n            <div className=\"MainBox\">\n                <span className=\"BoxTextTitle\">\n                온라인 코딩 시험 플랫폼 Re:Coder 입니다\n                </span>\n                <span className=\"BoxTextConnect\">\n                온라인 시험 감독을 위해 카메라 사용 권한 허용이 필요합니다.\n                </span>\n            \n                <div className=\"MainSubBox\">\n                    <span className=\"SubBoxText\">\n                    원활한 시험 응시를 위하여 ID와 PW를 입력 후 로그인 해 주세요.\n                    </span>\n                </div>\n                <div className=\"LoginBox\">\n                    <span className=\"BoxTextCode\">\n                    <span style={{color: \"red\"}}>✻</span> 로그인</span>\n                    <div className=\"InputBox\">\n                        <TextField id=\"userId\" variant=\"outlined\" size=\"small\" \n                            label=\"ID\" style={{width: \"100%\", margin: \"10px 0px\"}}\n                            onChange={(e) => setUserId(e.target.value)}/>\n                        <TextField id=\"userPw\" variant=\"outlined\" size=\"small\" \n                            label=\"PW\" style={{width: \"100%\"}} type=\"password\"\n                            onChange={(e) => setUserPw(e.target.value)}/>\n                    </div>\n                </div>\n                <div>\n                    <button className=\"MainButton\" onClick={() => getUserData()}>로그인</button>\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default Main;\n"]},"metadata":{},"sourceType":"module"}