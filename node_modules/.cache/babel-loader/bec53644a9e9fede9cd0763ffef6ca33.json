{"ast":null,"code":"\"use strict\";\n\nconst ValidityState = require(\"../generated/ValidityState\");\n\nconst {\n  isDisabled\n} = require(\"../helpers/form-controls\");\n\nconst {\n  closest\n} = require(\"../helpers/traversal\");\n\nconst {\n  fireAnEvent\n} = require(\"../helpers/events\");\n\nexports.implementation = class DefaultConstraintValidationImpl {\n  // https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#dom-cva-willvalidate\n  get willValidate() {\n    return this._isCandidateForConstraintValidation();\n  }\n\n  get validity() {\n    if (!this._validity) {\n      this._validity = ValidityState.createImpl(this._globalObject, [], {\n        element: this\n      });\n    }\n\n    return this._validity;\n  } // https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#dom-cva-checkvalidity\n\n\n  checkValidity() {\n    if (!this._isCandidateForConstraintValidation()) {\n      return true;\n    }\n\n    if (this._satisfiesConstraints()) {\n      return true;\n    }\n\n    fireAnEvent(\"invalid\", this, undefined, {\n      cancelable: true\n    });\n    return false;\n  } // https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#dom-cva-setcustomvalidity\n\n\n  setCustomValidity(message) {\n    this._customValidityErrorMessage = message;\n  } // https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#dom-cva-reportvalidity\n  // Since jsdom has no user interaction, it's the same as #checkValidity\n\n\n  reportValidity() {\n    return this.checkValidity();\n  } // https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#dom-cva-validationmessage\n\n\n  get validationMessage() {\n    const {\n      validity\n    } = this;\n\n    if (!this._isCandidateForConstraintValidation() || this._satisfiesConstraints()) {\n      return \"\";\n    }\n\n    const isSufferingFromCustomError = validity.customError;\n\n    if (isSufferingFromCustomError) {\n      return this._customValidityErrorMessage;\n    }\n\n    return \"Constraints not satisfied\";\n  }\n\n  _isCandidateForConstraintValidation() {\n    // https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#attr-fe-disabled\n    return !isDisabled(this) && // If an element has a datalist element ancestor,\n    // it is barred from constraint validation.\n    closest(this, \"datalist\") === null && !this._barredFromConstraintValidationSpecialization();\n  }\n\n  _isBarredFromConstraintValidation() {\n    return !this._isCandidateForConstraintValidation();\n  }\n\n  _satisfiesConstraints() {\n    return this.validity.valid;\n  }\n\n};","map":{"version":3,"sources":["/Library/WebServer/Documents/capstone/capstone-project-re-coder/node_modules/jsdom/lib/jsdom/living/constraint-validation/DefaultConstraintValidation-impl.js"],"names":["ValidityState","require","isDisabled","closest","fireAnEvent","exports","implementation","DefaultConstraintValidationImpl","willValidate","_isCandidateForConstraintValidation","validity","_validity","createImpl","_globalObject","element","checkValidity","_satisfiesConstraints","undefined","cancelable","setCustomValidity","message","_customValidityErrorMessage","reportValidity","validationMessage","isSufferingFromCustomError","customError","_barredFromConstraintValidationSpecialization","_isBarredFromConstraintValidation","valid"],"mappings":"AAAA;;AAEA,MAAMA,aAAa,GAAGC,OAAO,CAAC,4BAAD,CAA7B;;AACA,MAAM;AAAEC,EAAAA;AAAF,IAAiBD,OAAO,CAAC,0BAAD,CAA9B;;AACA,MAAM;AAAEE,EAAAA;AAAF,IAAcF,OAAO,CAAC,sBAAD,CAA3B;;AACA,MAAM;AAAEG,EAAAA;AAAF,IAAkBH,OAAO,CAAC,mBAAD,CAA/B;;AAEAI,OAAO,CAACC,cAAR,GAAyB,MAAMC,+BAAN,CAAsC;AAC7D;AACgB,MAAZC,YAAY,GAAG;AACjB,WAAO,KAAKC,mCAAL,EAAP;AACD;;AAEW,MAARC,QAAQ,GAAG;AACb,QAAI,CAAC,KAAKC,SAAV,EAAqB;AACnB,WAAKA,SAAL,GAAiBX,aAAa,CAACY,UAAd,CAAyB,KAAKC,aAA9B,EAA6C,EAA7C,EAAiD;AAChEC,QAAAA,OAAO,EAAE;AADuD,OAAjD,CAAjB;AAGD;;AACD,WAAO,KAAKH,SAAZ;AACD,GAb4D,CAe7D;;;AACAI,EAAAA,aAAa,GAAG;AACd,QAAI,CAAC,KAAKN,mCAAL,EAAL,EAAiD;AAC/C,aAAO,IAAP;AACD;;AACD,QAAI,KAAKO,qBAAL,EAAJ,EAAkC;AAChC,aAAO,IAAP;AACD;;AACDZ,IAAAA,WAAW,CAAC,SAAD,EAAY,IAAZ,EAAkBa,SAAlB,EAA6B;AAAEC,MAAAA,UAAU,EAAE;AAAd,KAA7B,CAAX;AACA,WAAO,KAAP;AACD,GAzB4D,CA2B7D;;;AACAC,EAAAA,iBAAiB,CAACC,OAAD,EAAU;AACzB,SAAKC,2BAAL,GAAmCD,OAAnC;AACD,GA9B4D,CAgC7D;AACA;;;AACAE,EAAAA,cAAc,GAAG;AACf,WAAO,KAAKP,aAAL,EAAP;AACD,GApC4D,CAsC7D;;;AACqB,MAAjBQ,iBAAiB,GAAG;AACtB,UAAM;AAAEb,MAAAA;AAAF,QAAe,IAArB;;AACA,QAAI,CAAC,KAAKD,mCAAL,EAAD,IAA+C,KAAKO,qBAAL,EAAnD,EAAiF;AAC/E,aAAO,EAAP;AACD;;AACD,UAAMQ,0BAA0B,GAAGd,QAAQ,CAACe,WAA5C;;AACA,QAAID,0BAAJ,EAAgC;AAC9B,aAAO,KAAKH,2BAAZ;AACD;;AACD,WAAO,2BAAP;AACD;;AAEDZ,EAAAA,mCAAmC,GAAG;AACpC;AACA,WAAO,CAACP,UAAU,CAAC,IAAD,CAAX,IACL;AACA;AACAC,IAAAA,OAAO,CAAC,IAAD,EAAO,UAAP,CAAP,KAA8B,IAHzB,IAIL,CAAC,KAAKuB,6CAAL,EAJH;AAKD;;AAEDC,EAAAA,iCAAiC,GAAG;AAClC,WAAO,CAAC,KAAKlB,mCAAL,EAAR;AACD;;AAEDO,EAAAA,qBAAqB,GAAG;AACtB,WAAO,KAAKN,QAAL,CAAckB,KAArB;AACD;;AAlE4D,CAA/D","sourcesContent":["\"use strict\";\n\nconst ValidityState = require(\"../generated/ValidityState\");\nconst { isDisabled } = require(\"../helpers/form-controls\");\nconst { closest } = require(\"../helpers/traversal\");\nconst { fireAnEvent } = require(\"../helpers/events\");\n\nexports.implementation = class DefaultConstraintValidationImpl {\n  // https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#dom-cva-willvalidate\n  get willValidate() {\n    return this._isCandidateForConstraintValidation();\n  }\n\n  get validity() {\n    if (!this._validity) {\n      this._validity = ValidityState.createImpl(this._globalObject, [], {\n        element: this\n      });\n    }\n    return this._validity;\n  }\n\n  // https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#dom-cva-checkvalidity\n  checkValidity() {\n    if (!this._isCandidateForConstraintValidation()) {\n      return true;\n    }\n    if (this._satisfiesConstraints()) {\n      return true;\n    }\n    fireAnEvent(\"invalid\", this, undefined, { cancelable: true });\n    return false;\n  }\n\n  // https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#dom-cva-setcustomvalidity\n  setCustomValidity(message) {\n    this._customValidityErrorMessage = message;\n  }\n\n  // https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#dom-cva-reportvalidity\n  // Since jsdom has no user interaction, it's the same as #checkValidity\n  reportValidity() {\n    return this.checkValidity();\n  }\n\n  // https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#dom-cva-validationmessage\n  get validationMessage() {\n    const { validity } = this;\n    if (!this._isCandidateForConstraintValidation() || this._satisfiesConstraints()) {\n      return \"\";\n    }\n    const isSufferingFromCustomError = validity.customError;\n    if (isSufferingFromCustomError) {\n      return this._customValidityErrorMessage;\n    }\n    return \"Constraints not satisfied\";\n  }\n\n  _isCandidateForConstraintValidation() {\n    // https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#attr-fe-disabled\n    return !isDisabled(this) &&\n      // If an element has a datalist element ancestor,\n      // it is barred from constraint validation.\n      closest(this, \"datalist\") === null &&\n      !this._barredFromConstraintValidationSpecialization();\n  }\n\n  _isBarredFromConstraintValidation() {\n    return !this._isCandidateForConstraintValidation();\n  }\n\n  _satisfiesConstraints() {\n    return this.validity.valid;\n  }\n};\n"]},"metadata":{},"sourceType":"script"}